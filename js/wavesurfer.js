/*!
 * wavesurfer.js 6.4.0 (2022-11-05)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
*/ !function e(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("WaveSurfer",[],r):"object"==typeof exports?exports.WaveSurfer=r():t.WaveSurfer=r()}(self,()=>(()=>{var e,t={"./src/drawer.canvasentry.js"(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(/*! ./util/style */ "./src/util/style.js")),i=a(r(/*! ./util/get-id */ "./src/util/get-id.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){var e,t,r;function a(){!function e(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,a),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,i.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return e=a,t=[{key:"initWave",value:function e(t){this.wave=t,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function e(t){this.progress=t,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function e(t,r,i,a){this.start=this.wave.offsetLeft/r||0,this.end=this.start+t/r,this.wave.width=i,this.wave.height=a;var s={width:t+"px"};(0,n.default)(this.wave,s),this.hasProgressCanvas&&(this.progress.width=i,this.progress.height=a,(0,n.default)(this.progress,s))}},{key:"clearWave",value:function e(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function e(t,r){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,t),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,r))}},{key:"getFillStyle",value:function e(t,r){if("string"==typeof r||r instanceof CanvasGradient)return r;var n=t.createLinearGradient(0,0,0,t.canvas.height);return r.forEach(function(e,t){return n.addColorStop(t/r.length,e)}),n}},{key:"applyCanvasTransforms",value:function e(t){t&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function e(t,r,n,i,a){this.fillRectToContext(this.waveCtx,t,r,n,i,a),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,t,r,n,i,a)}},{key:"fillRectToContext",value:function e(t,r,n,i,a,s){t&&(s?this.drawRoundedRect(t,r,n,i,a,s):t.fillRect(r,n,i,a))}},{key:"drawRoundedRect",value:function e(t,r,n,i,a,s){0!==a&&(a<0&&(a*=-1,n-=a),t.beginPath(),t.moveTo(r+s,n),t.lineTo(r+i-s,n),t.quadraticCurveTo(r+i,n,r+i,n+s),t.lineTo(r+i,n+a-s),t.quadraticCurveTo(r+i,n+a,r+i-s,n+a),t.lineTo(r+s,n+a),t.quadraticCurveTo(r,n+a,r,n+a-s),t.lineTo(r,n+s),t.quadraticCurveTo(r,n,r+s,n),t.closePath(),t.fill())}},{key:"drawLines",value:function e(t,r,n,i,a,s){this.drawLineToContext(this.waveCtx,t,r,n,i,a,s),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,t,r,n,i,a,s)}},{key:"drawLineToContext",value:function e(t,r,n,i,a,s,o){if(t){var u,l,c,f=r.length/2,h=Math.round(f*this.start),d=Math.round(f*this.end)+1,p=h,v=d,y=this.wave.width/(v-p-1),m=i+a,g=n/i;for(t.beginPath(),t.moveTo((p-h)*y,m),t.lineTo((p-h)*y,m-Math.round((r[2*p]||0)/g)),u=p;u<v;u++)c=Math.round((l=r[2*u]||0)/g),t.lineTo((u-h)*y+this.halfPixel,m-c);for(var A=v-1;A>=p;A--)c=Math.round((l=r[2*A+1]||0)/g),t.lineTo((A-h)*y+this.halfPixel,m-c);t.lineTo((p-h)*y,m-Math.round((r[2*p+1]||0)/g)),t.closePath(),t.fill()}}},{key:"destroy",value:function e(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function e(t,r,n){var i=this;return"blob"===n?new Promise(function(e){i.wave.toBlob(e,t,r)}):"dataURL"===n?this.wave.toDataURL(t,r):void 0}}],s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}();t.default=o,e.exports=t.default},"./src/drawer.js"(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function e(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var i=a(r);if(i&&i.has(t))return i.get(t);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var l=o?Object.getOwnPropertyDescriptor(t,u):null;l&&(l.get||l.set)?Object.defineProperty(s,u,l):s[u]=t[u]}return s.default=t,i&&i.set(t,s),s}(r(/*! ./util */ "./src/util/index.js"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function e(n){return n?r:t})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){return t.__proto__=r,t})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var l=function(e){!function e(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&o(t,r)}(h,e);var t,r,a,l,c,f=(t=h,r=function e(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function e(){var i,a=u(t);if(r){var s=u(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return function e(t,r){if(r&&("object"===n(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return function e(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)});function h(e,t){var r;return!function e(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,h),(r=f.call(this)).container=i.withOrientation(e,t.vertical),r.params=t,r.width=0,r.height=t.height*r.params.pixelRatio,r.lastPos=0,r.wrapper=null,r}return a=h,l=[{key:"style",value:function e(t,r){return i.style(t,r)}},{key:"createWrapper",value:function e(){this.wrapper=i.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function e(t,r){r||t.preventDefault();var n,a=i.withOrientation(t.targetTouches?t.targetTouches[0]:t,this.params.vertical).clientX,s=this.wrapper.getBoundingClientRect(),o=this.width,u=this.getWidth(),l=this.getProgressPixels(s,a);return n=!this.params.fillParent&&o<u?l*(this.params.pixelRatio/o)||0:(l+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,i.clamp(n,0,1)}},{key:"getProgressPixels",value:function e(t,r){return this.params.rtl?t.right-r:r-t.left}},{key:"setupWrapperEvents",value:function e(){var t=this;this.wrapper.addEventListener("click",function(e){var r=i.withOrientation(e,t.params.vertical),n=t.wrapper.offsetHeight-t.wrapper.clientHeight;if(0!==n){var a=t.wrapper.getBoundingClientRect();if(r.clientY>=a.bottom-n)return}t.params.interact&&t.fireEvent("click",e,t.handleEvent(e))}),this.wrapper.addEventListener("dblclick",function(e){t.params.interact&&t.fireEvent("dblclick",e,t.handleEvent(e))}),this.wrapper.addEventListener("scroll",function(e){return t.fireEvent("scroll",e)})}},{key:"drawPeaks",value:function e(t,r,n,i){this.setWidth(r)||this.clearWave(),this.params.barWidth?this.drawBars(t,0,n,i):this.drawWave(t,0,n,i)}},{key:"resetScroll",value:function e(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function e(t){var r=this.wrapper.scrollWidth*t;this.recenterOnPosition(r,!0)}},{key:"recenterOnPosition",value:function e(t,r){var n=this.wrapper.scrollLeft,i=~~(this.wrapper.clientWidth/2),a=this.wrapper.scrollWidth-this.wrapper.clientWidth,s=t-i,o=s-n;if(0!=a){if(!r&&-i<=o&&o<i){var u=this.params.autoCenterRate;u/=i,u*=a,s=n+(o=Math.max(-u,Math.min(u,o)))}(s=Math.max(0,Math.min(a,s)))!=n&&(this.wrapper.scrollLeft=s)}}},{key:"getScrollX",value:function e(){var t=0;if(this.wrapper){var r=this.params.pixelRatio;t=Math.round(this.wrapper.scrollLeft*r),this.params.scrollParent&&(t=Math.min(~~(this.wrapper.scrollWidth*r-this.getWidth()),Math.max(0,t)))}return t}},{key:"getWidth",value:function e(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function e(t){if(this.width==t)return!1;if(this.width=t,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var r=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:r})}return this.updateSize(),!0}},{key:"setHeight",value:function e(t){return t!=this.height&&(this.height=t,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function e(t){var r=1/this.params.pixelRatio,n=Math.round(t*this.width)*r;if(n<this.lastPos||n-this.lastPos>=r){if(this.lastPos=n,this.params.scrollParent&&this.params.autoCenter){var i=~~(this.wrapper.scrollWidth*t);this.recenterOnPosition(i,this.params.autoCenterImmediately)}this.updateProgress(n)}}},{key:"destroy",value:function e(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function e(){}},{key:"updateSize",value:function e(){}},{key:"drawBars",value:function e(t,r,n,i){}},{key:"drawWave",value:function e(t,r,n,i){}},{key:"clearWave",value:function e(){}},{key:"updateProgress",value:function e(t){}}],s(a.prototype,l),c&&s(a,c),Object.defineProperty(a,"prototype",{writable:!1}),h}(i.Observer);t.default=l,e.exports=t.default},"./src/drawer.multicanvas.js"(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(/*! ./drawer */ "./src/drawer.js")),a=function e(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var i=o(r);if(i&&i.has(t))return i.get(t);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var l=s?Object.getOwnPropertyDescriptor(t,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=t[u]}return a.default=t,i&&i.set(t,a),a}(r(/*! ./util */ "./src/util/index.js")),s=u(r(/*! ./drawer.canvasentry */ "./src/drawer.canvasentry.js"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function e(n){return n?r:t})(e)}function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){return t.__proto__=r,t})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var h=function(e){!function e(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&c(t,r)}(d,e);var t,r,i,o,u,h=(t=d,r=function e(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function e(){var i,a=f(t);if(r){var s=f(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return function e(t,r){if(r&&("object"===n(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return function e(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)});function d(e,t){var r;return!function e(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,d),(r=h.call(this,e,t)).maxCanvasWidth=t.maxCanvasWidth,r.maxCanvasElementWidth=Math.round(t.maxCanvasWidth/t.pixelRatio),r.hasProgressCanvas=t.waveColor!=t.progressColor,r.halfPixel=.5/t.pixelRatio,r.canvases=[],r.progressWave=null,r.EntryClass=s.default,r.canvasContextAttributes=t.drawingContextAttributes,r.overlap=2*Math.ceil(t.pixelRatio/2),r.barRadius=t.barRadius||0,r.vertical=t.vertical,r}return i=d,o=[{key:"init",value:function e(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function e(){this.progressWave=a.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function e(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function e(){for(var t=this,r=Math.ceil(Math.round(this.width/this.params.pixelRatio)/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<r;)this.addCanvas();for(;this.canvases.length>r;)this.removeCanvas();var n=this.maxCanvasWidth+this.overlap,i=this.canvases.length-1;this.canvases.forEach(function(e,r){r==i&&(n=t.width-t.maxCanvasWidth*i),t.updateDimensions(e,n,t.height),e.clearWave()})}},{key:"addCanvas",value:function e(){var t=new this.EntryClass;t.canvasContextAttributes=this.canvasContextAttributes,t.hasProgressCanvas=this.hasProgressCanvas,t.halfPixel=this.halfPixel;var r=this.maxCanvasElementWidth*this.canvases.length,n=a.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(n,{position:"absolute",zIndex:2,left:r+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),t.initWave(n),this.hasProgressCanvas){var i=a.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(i,{position:"absolute",left:r+"px",top:0,bottom:0,height:"100%"}),t.initProgress(i)}this.canvases.push(t)}},{key:"removeCanvas",value:function e(){var t=this.canvases[this.canvases.length-1];t.wave.parentElement.removeChild(t.wave.domElement),this.hasProgressCanvas&&t.progress.parentElement.removeChild(t.progress.domElement),t&&(t.destroy(),t=null),this.canvases.pop()}},{key:"updateDimensions",value:function e(t,r,n){var i=Math.round(r/this.params.pixelRatio),a=Math.round(this.width/this.params.pixelRatio);t.updateDimensions(i,a,r,n),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function e(){var t=this;a.frame(function(){t.canvases.forEach(function(e){return e.clearWave()})})()}},{key:"drawBars",value:function e(t,r,n,i){var a=this;return this.prepareDraw(t,r,n,i,function(e){var t=e.absmax,r=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,u=e.peaks,l=e.channelIndex;if(void 0!==n)for(var c=r?2:1,f=u.length/c,h=a.params.barWidth*a.params.pixelRatio,d=null===a.params.barGap?Math.max(a.params.pixelRatio,~~(h/2)):Math.max(a.params.pixelRatio,a.params.barGap*a.params.pixelRatio),p=h+d,v=f/a.width,y=i,m=n;m<y;m+=p){var g=0,A=Math.floor(m*v)*c,k=Math.floor((m+p)*v)*c;do{var b=Math.abs(u[A]);b>g&&(g=b),A+=c}while(A<k);var P=Math.round(g/t*o);a.params.barMinHeight&&(P=Math.max(P,a.params.barMinHeight)),a.fillRect(m+a.halfPixel,o-P+s,h+a.halfPixel,2*P,a.barRadius,l)}})}},{key:"drawWave",value:function e(t,r,n,i){var a=this;return this.prepareDraw(t,r,n,i,function(e){var t=e.absmax,r=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,u=e.peaks,l=e.channelIndex;if(!r){for(var c=[],f=u.length,h=0;h<f;h++)c[2*h]=u[h],c[2*h+1]=-u[h];u=c}void 0!==n&&a.drawLine(u,t,o,s,n,i,l),a.fillRect(0,o+s-a.halfPixel,a.width,a.halfPixel,a.barRadius,l)})}},{key:"drawLine",value:function e(t,r,n,i,a,s,o){var u=this,l=this.params.splitChannelsOptions.channelColors[o]||{},c=l.waveColor,f=l.progressColor;this.canvases.forEach(function(e,o){u.setFillStyles(e,c,f),u.applyCanvasTransforms(e,u.params.vertical),e.drawLines(t,r,n,i,a,s)})}},{key:"fillRect",value:function e(t,r,n,i,a,s){for(var o=Math.floor(t/this.maxCanvasWidth),u=Math.min(Math.ceil((t+n)/this.maxCanvasWidth)+1,this.canvases.length),l=o;l<u;l++){var c=this.canvases[l],f=l*this.maxCanvasWidth,h={x1:Math.max(t,l*this.maxCanvasWidth),y1:r,x2:Math.min(t+n,l*this.maxCanvasWidth+c.wave.width),y2:r+i};if(h.x1<h.x2){var d=this.params.splitChannelsOptions.channelColors[s]||{},p=d.waveColor,v=d.progressColor;this.setFillStyles(c,p,v),this.applyCanvasTransforms(c,this.params.vertical),c.fillRects(h.x1-f,h.y1,h.x2-h.x1,h.y2-h.y1,a)}}}},{key:"hideChannel",value:function e(t){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(t)}},{key:"prepareDraw",value:function e(t,r,n,i,s,o,u){var l=this;return a.frame(function(){if(t[0]instanceof Array){var e=t;if(l.params.splitChannels){var c,f=e.filter(function(e,t){return!l.hideChannel(t)});return l.params.splitChannelsOptions.overlay||l.setHeight(Math.max(f.length,1)*l.params.height*l.params.pixelRatio),l.params.splitChannelsOptions&&l.params.splitChannelsOptions.relativeNormalization&&(c=a.max(e.map(function(e){return a.absMax(e)}))),e.forEach(function(e,t){return l.prepareDraw(e,t,n,i,s,f.indexOf(e),c)})}t=e[0]}if(!l.hideChannel(r)){var h=1/l.params.barHeight;l.params.normalize&&(h=void 0===u?a.absMax(t):u);var d=[].some.call(t,function(e){return e<0}),p=l.params.height*l.params.pixelRatio,v=p*o||0;return l.params.splitChannelsOptions&&l.params.splitChannelsOptions.overlay&&(v=0),s({absmax:h,hasMinVals:d,height:p,offsetY:v,halfH:p/2,peaks:t,channelIndex:r})}})()}},{key:"setFillStyles",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;t.setFillStyles(r,n)}},{key:"applyCanvasTransforms",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.applyCanvasTransforms(r)}},{key:"getImage",value:function e(t,r,n){if("blob"===n)return Promise.all(this.canvases.map(function(e){return e.getImage(t,r,n)}));if("dataURL"===n){var i=this.canvases.map(function(e){return e.getImage(t,r,n)});return i.length>1?i:i[0]}}},{key:"updateProgress",value:function e(t){this.style(this.progressWave,{width:t+"px"})}}],l(i.prototype,o),u&&l(i,u),Object.defineProperty(i,"prototype",{writable:!1}),d}(i.default);t.default=h,e.exports=t.default},"./src/mediaelement-webaudio.js"(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=r(/*! ./mediaelement */ "./src/mediaelement.js"),i&&i.__esModule?i:{default:i});function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function e(t,r,n){var i=function e(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=l(t)););return t}(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(arguments.length<3?t:n):a.value}}).apply(this,arguments)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){return t.__proto__=r,t})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var c=function(e){!function e(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&u(t,r)}(h,e);var t,r,i,a,c,f=(t=h,r=function e(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function e(){var i,a=l(t);if(r){var s=l(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return function e(t,r){if(r&&("object"===n(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return function e(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)});function h(e){var t;return!function e(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,h),(t=f.call(this,e)).params=e,t.sourceMediaElement=null,t}return i=h,a=[{key:"init",value:function e(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function e(t,r,n){o(l(h.prototype),"_load",this).call(this,t,r,n),this.createMediaElementSource(t)}},{key:"createMediaElementSource",value:function e(t){this.sourceMediaElement=this.ac.createMediaElementSource(t),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function e(t,r){return this.resumeAudioContext(),o(l(h.prototype),"play",this).call(this,t,r)}},{key:"destroy",value:function e(){o(l(h.prototype),"destroy",this).call(this),this.destroyWebAudio()}}],s(i.prototype,a),c&&s(i,c),Object.defineProperty(i,"prototype",{writable:!1}),h}(a.default);t.default=c,e.exports=t.default},"./src/mediaelement.js"(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=r(/*! ./webaudio */ "./src/webaudio.js"),i&&i.__esModule?i:{default:i}),s=function e(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var i=o(r);if(i&&i.has(t))return i.get(t);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var l=s?Object.getOwnPropertyDescriptor(t,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=t[u]}return a.default=t,i&&i.set(t,a),a}(r(/*! ./util */ "./src/util/index.js"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function e(n){return n?r:t})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function e(t,r,n){var i=function e(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=f(t)););return t}(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(arguments.length<3?t:n):a.value}}).apply(this,arguments)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){return t.__proto__=r,t})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var h=function(e){!function e(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&c(t,r)}(d,e);var t,r,i,a,o,h=(t=d,r=function e(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function e(){var i,a=f(t);if(r){var s=f(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return function e(t,r){if(r&&("object"===n(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return function e(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)});function d(e){var t;return!function e(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,d),(t=h.call(this,e)).params=e,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function e(){},pause:function e(){},volume:0},t.mediaType=e.mediaType.toLowerCase(),t.elementPosition=e.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return i=d,a=[{key:"init",value:function e(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function e(){var t=this;this.mediaListeners.error=function(){t.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){t.fireEvent("canplay")},this.mediaListeners.ended=function(){t.fireEvent("finish")},this.mediaListeners.play=function(){t.fireEvent("play")},this.mediaListeners.pause=function(){t.fireEvent("pause")},this.mediaListeners.seeked=function(e){t.fireEvent("seek")},this.mediaListeners.volumechange=function(e){t.isMuted=t.media.muted,t.isMuted?t.volume=0:t.volume=t.media.volume,t.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(e){t.media.removeEventListener(e,t.mediaListeners[e]),t.media.addEventListener(e,t.mediaListeners[e])})}},{key:"createTimer",value:function e(){var t=this,r=function e(){!t.isPaused()&&(t.fireEvent("audioprocess",t.getCurrentTime()),s.frame(e)())};this.on("play",r),this.on("pause",function(){t.fireEvent("audioprocess",t.getCurrentTime())})}},{key:"load",value:function e(t,r,n,i){var a=document.createElement(this.mediaType);a.controls=this.params.mediaControls,a.autoplay=this.params.autoplay||!1,a.preload=null==i?"auto":i,a.src=t,a.style.width="100%";var s=r.querySelector(this.mediaType);s&&r.removeChild(s),r.appendChild(a),this._load(a,n,i)}},{key:"loadElt",value:function e(t,r){t.controls=this.params.mediaControls,t.autoplay=this.params.autoplay||!1,this._load(t,r,t.preload)}},{key:"_load",value:function e(t,r,n){if(!(t instanceof HTMLMediaElement)||void 0===t.addEventListener)throw Error("media parameter is not a valid media element");"function"!=typeof t.load||r&&"none"==n||t.load(),this.media=t,this._setupMediaListeners(),this.peaks=r,this.onPlayEnd=null,this.buffer=null,this.isMuted=t.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function e(){return!this.media||this.media.paused}},{key:"getDuration",value:function e(){if(this.explicitDuration)return this.explicitDuration;var t=(this.buffer||this.media).duration;return t>=1/0&&(t=this.media.seekable.end(0)),t}},{key:"getCurrentTime",value:function e(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function e(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function e(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function e(t){this.playbackRate=t||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function e(t){null==t||isNaN(t)||(this.media.currentTime=t),this.clearPlayEnd()}},{key:"play",value:function e(t,r){this.seekTo(t);var n=this.media.play();return r&&this.setPlayEnd(r),n}},{key:"pause",value:function e(){var t;return this.media&&(t=this.media.pause()),this.clearPlayEnd(),t}},{key:"setPlayEnd",value:function e(t){var r=this;this.clearPlayEnd(),this._onPlayEnd=function(e){e>=t&&(r.pause(),r.seekTo(t))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function e(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function e(t,r,n){return this.buffer?l(f(d.prototype),"getPeaks",this).call(this,t,r,n):this.peaks||[]}},{key:"setSinkId",value:function e(t){return t?this.media.setSinkId?this.media.setSinkId(t):Promise.reject(Error("setSinkId is not supported in your browser")):Promise.reject(Error("Invalid deviceId: "+t))}},{key:"getVolume",value:function e(){return this.volume}},{key:"setVolume",value:function e(t){this.volume=t,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function e(t){this.isMuted=this.media.muted=t}},{key:"destroy",value:function e(){var t=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(e){t.media&&t.media.removeEventListener(e,t.mediaListeners[e])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}],u(i.prototype,a),o&&u(i,o),Object.defineProperty(i,"prototype",{writable:!1}),d}(a.default);t.default=h,e.exports=t.default},"./src/peakcache.js"(e,t){"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){var e,t,n;function i(){!function e(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,i),this.clearPeakCache()}return e=i,t=[{key:"clearPeakCache",value:function e(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function e(t,r,n){t!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=t);for(var i=[],a=0;a<this.peakCacheRanges.length&&this.peakCacheRanges[a]<r;)a++;for(a%2==0&&i.push(r);a<this.peakCacheRanges.length&&this.peakCacheRanges[a]<=n;)i.push(this.peakCacheRanges[a]),a++;a%2==0&&i.push(n),i=i.filter(function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(i),this.peakCacheRanges=this.peakCacheRanges.sort(function(e,t){return e-t}).filter(function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]});var s=[];for(a=0;a<i.length;a+=2)s.push([i[a],i[a+1]]);return s}},{key:"getCacheRanges",value:function e(){var t,r=[];for(t=0;t<this.peakCacheRanges.length;t+=2)r.push([this.peakCacheRanges[t],this.peakCacheRanges[t+1]]);return r}}],r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();t.default=n,e.exports=t.default},"./src/util/absMax.js"(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var r=(0,n.default)(t),a=(0,i.default)(t);return-a>r?-a:r};var n=a(r(/*! ./max */ "./src/util/max.js")),i=a(r(/*! ./min */ "./src/util/min.js"));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},"./src/util/clamp.js"(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r,n){return Math.min(Math.max(r,t),n)},e.exports=t.default},"./src/util/fetch.js"(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){if(t){if(!t.url)throw Error("fetch url missing")}else throw Error("fetch options missing");var r=new i.default,n=new Headers,a=new Request(t.url);r.controller=new AbortController,t&&t.requestHeaders&&t.requestHeaders.forEach(function(e){n.append(e.key,e.value)});var o=t.responseType||"json",u={method:t.method||"GET",headers:n,mode:t.mode||"cors",credentials:t.credentials||"same-origin",cache:t.cache||"default",redirect:t.redirect||"follow",referrer:t.referrer||"client",signal:r.controller.signal};return fetch(a,u).then(function(e){r.response=e;var t=!0;e.body||(t=!1);var n=e.headers.get("content-length");return(null===n&&(t=!1),t)?(r.onProgress=function(e){r.fireEvent("progress",e)},new Response(new ReadableStream(new s(r,n,e)),u)):e}).then(function(e){var t;if(e.ok)switch(o){case"arraybuffer":return e.arrayBuffer();case"json":return e.json();case"blob":return e.blob();case"text":return e.text();default:t="Unknown responseType: "+o}throw t||(t="HTTP error status: "+e.status),Error(t)}).then(function(e){r.fireEvent("success",e)}).catch(function(e){r.fireEvent("error",e)}),r.fetchRequest=a,r};var n,i=(n=r(/*! ./observer */ "./src/util/observer.js"),n&&n.__esModule?n:{default:n});function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){var e,t,r;function n(e,t,r){!function e(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,n),this.instance=e,this.instance._reader=r.body.getReader(),this.total=parseInt(t,10),this.loaded=0}return e=n,t=[{key:"start",value:function e(t){var r=this;!function e(){r.instance._reader.read().then(function(n){var i=n.done,a=n.value;if(i){0===r.total&&r.instance.onProgress.call(r.instance,{loaded:r.loaded,total:r.total,lengthComputable:!1}),t.close();return}r.loaded+=a.byteLength,r.instance.onProgress.call(r.instance,{loaded:r.loaded,total:r.total,lengthComputable:0!==r.total}),t.enqueue(a),e()}).catch(function(e){t.error(e)})}()}}],a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),n}();e.exports=t.default},"./src/util/frame.js"(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){return function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,i.default)(function(){return t.apply(void 0,r)})}};var n,i=(n=r(/*! ./request-animation-frame */ "./src/util/request-animation-frame.js"),n&&n.__esModule?n:{default:n});e.exports=t.default},"./src/util/get-id.js"(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){return void 0===t&&(t="wavesurfer_"),t+Math.random().toString(32).substring(2)},e.exports=t.default},"./src/util/index.js"(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Observer",{enumerable:!0,get:function e(){return o.default}}),Object.defineProperty(t,"absMax",{enumerable:!0,get:function e(){return s.default}}),Object.defineProperty(t,"clamp",{enumerable:!0,get:function e(){return p.default}}),Object.defineProperty(t,"debounce",{enumerable:!0,get:function e(){return f.default}}),Object.defineProperty(t,"fetchFile",{enumerable:!0,get:function e(){return d.default}}),Object.defineProperty(t,"frame",{enumerable:!0,get:function e(){return c.default}}),Object.defineProperty(t,"getId",{enumerable:!0,get:function e(){return n.default}}),Object.defineProperty(t,"ignoreSilenceMode",{enumerable:!0,get:function e(){return y.default}}),Object.defineProperty(t,"max",{enumerable:!0,get:function e(){return i.default}}),Object.defineProperty(t,"min",{enumerable:!0,get:function e(){return a.default}}),Object.defineProperty(t,"preventClick",{enumerable:!0,get:function e(){return h.default}}),Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function e(){return l.default}}),Object.defineProperty(t,"style",{enumerable:!0,get:function e(){return u.default}}),Object.defineProperty(t,"withOrientation",{enumerable:!0,get:function e(){return v.default}});var n=m(r(/*! ./get-id */ "./src/util/get-id.js")),i=m(r(/*! ./max */ "./src/util/max.js")),a=m(r(/*! ./min */ "./src/util/min.js")),s=m(r(/*! ./absMax */ "./src/util/absMax.js")),o=m(r(/*! ./observer */ "./src/util/observer.js")),u=m(r(/*! ./style */ "./src/util/style.js")),l=m(r(/*! ./request-animation-frame */ "./src/util/request-animation-frame.js")),c=m(r(/*! ./frame */ "./src/util/frame.js")),f=m(r(/*! debounce */ "./node_modules/debounce/index.js")),h=m(r(/*! ./prevent-click */ "./src/util/prevent-click.js")),d=m(r(/*! ./fetch */ "./src/util/fetch.js")),p=m(r(/*! ./clamp */ "./src/util/clamp.js")),v=m(r(/*! ./orientation */ "./src/util/orientation.js")),y=m(r(/*! ./silence-mode */ "./src/util/silence-mode.js"));function m(e){return e&&e.__esModule?e:{default:e}}},"./src/util/max.js"(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var r=-1/0;return Object.keys(t).forEach(function(e){t[e]>r&&(r=t[e])}),r},e.exports=t.default},"./src/util/min.js"(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var r=Number(1/0);return Object.keys(t).forEach(function(e){t[e]<r&&(r=t[e])}),r},e.exports=t.default},"./src/util/observer.js"(e,t){"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){var e,t,n;function i(){!function e(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,i),this._disabledEventEmissions=[],this.handlers=null}return e=i,t=[{key:"on",value:function e(t,r){var n=this;this.handlers||(this.handlers={});var i=this.handlers[t];return i||(i=this.handlers[t]=[]),i.push(r),{name:t,callback:r,un:function e(t,r){return n.un(t,r)}}}},{key:"un",value:function e(t,r){if(this.handlers){var n,i=this.handlers[t];if(i){if(r)for(n=i.length-1;n>=0;n--)i[n]==r&&i.splice(n,1);else i.length=0}}}},{key:"unAll",value:function e(){this.handlers=null}},{key:"once",value:function e(t,r){var n=this,i=function e(){for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];r.apply(n,a),setTimeout(function(){n.un(t,e)},0)};return this.on(t,i)}},{key:"setDisabledEventEmissions",value:function e(t){this._disabledEventEmissions=t}},{key:"_isDisabledEventEmission",value:function e(t){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(t)}},{key:"fireEvent",value:function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!(!this.handlers||this._isDisabledEventEmission(t))){var a=this.handlers[t];a&&a.forEach(function(e){e.apply(void 0,n)})}}}],r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();t.default=n,e.exports=t.default},"./src/util/orientation.js"(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){return t[i]?t:new Proxy(t,{get:function t(a,s,o){if(s===i)return!0;if("domElement"===s)return a;if("style"===s)return e(a.style,r);if("canvas"===s)return e(a.canvas,r);if("getBoundingClientRect"===s)return function(){return e(a.getBoundingClientRect.apply(a,arguments),r)};if("getContext"===s)return function(){return e(a.getContext.apply(a,arguments),r)};var u=a[n(s,r)];return"function"==typeof u?u.bind(a):u},set:function e(t,i,a){return t[n(i,r)]=a,!0}})};var r={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function n(e,t){return Object.prototype.hasOwnProperty.call(r,e)&&t?r[e]:e}var i=Symbol("isProxy");e.exports=t.default},"./src/util/prevent-click.js"(e,t){"use strict";function r(e){e.stopPropagation(),document.body.removeEventListener("click",r,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){document.body.addEventListener("click",r,!0)},e.exports=t.default},"./src/util/request-animation-frame.js"(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return setTimeout(e,1e3/60)}).bind(window);t.default=r,e.exports=t.default},"./src/util/silence-mode.js"(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(){var t=document.createElement("div");t.innerHTML='<audio x-webkit-airplay="deny"></audio>';var r=t.children.item(0);r.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",r.preload="auto",r.type="audio/mpeg",r.disableRemotePlayback=!0,r.play(),r.remove(),t.remove()},e.exports=t.default},"./src/util/style.js"(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){return Object.keys(r).forEach(function(e){t.style[e]!==r[e]&&(t.style[e]=r[e])}),t},e.exports=t.default},"./src/wavesurfer.js"(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function e(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var i=f(r);if(i&&i.has(t))return i.get(t);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=s?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=t[o]}return a.default=t,i&&i.set(t,a),a}(r(/*! ./util */ "./src/util/index.js")),a=c(r(/*! ./drawer.multicanvas */ "./src/drawer.multicanvas.js")),s=c(r(/*! ./webaudio */ "./src/webaudio.js")),o=c(r(/*! ./mediaelement */ "./src/mediaelement.js")),u=c(r(/*! ./peakcache */ "./src/peakcache.js")),l=c(r(/*! ./mediaelement-webaudio */ "./src/mediaelement-webaudio.js"));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function e(n){return n?r:t})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){return t.__proto__=r,t})(e,t)}function d(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var g=function(e){!function e(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&h(t,r)}(A,e);var t,r,n,c,f,g=(c=A,f=function e(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function e(){var t,r=v(c);if(f){var n=v(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return d(this,t)});function A(e){if(function e(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,A),y(p(t=g.call(this)),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:a.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),y(p(t),"backends",{MediaElement:o.default,WebAudio:s.default,MediaElementWebAudio:l.default}),y(p(t),"util",i),t.params=Object.assign({},t.defaultParams,e),t.params.splitChannelsOptions=Object.assign({},t.defaultParams.splitChannelsOptions,e.splitChannelsOptions),t.container="string"==typeof e.container?document.querySelector(t.params.container):t.params.container,!t.container)throw Error("Container element not found");if(null==t.params.mediaContainer?t.mediaContainer=t.container:"string"==typeof t.params.mediaContainer?t.mediaContainer=document.querySelector(t.params.mediaContainer):t.mediaContainer=t.params.mediaContainer,!t.mediaContainer)throw Error("Media Container element not found");if(t.params.maxCanvasWidth<=1)throw Error("maxCanvasWidth must be greater than 1");if(t.params.maxCanvasWidth%2==1)throw Error("maxCanvasWidth must be an even number");if(!0===t.params.rtl&&(!0===t.params.vertical?i.style(t.container,{transform:"rotateX(180deg)"}):i.style(t.container,{transform:"rotateY(180deg)"})),t.params.backgroundColor&&t.setBackgroundColor(t.params.backgroundColor),t.savedVolume=0,t.isMuted=!1,t.tmpEvents=[],t.currentRequest=null,t.arraybuffer=null,t.drawer=null,t.backend=null,t.peakCache=null,"function"!=typeof t.params.renderer)throw Error("Renderer parameter is invalid");t.Drawer=t.params.renderer,"AudioElement"==t.params.backend&&(t.params.backend="MediaElement"),"WebAudio"!=t.params.backend&&"MediaElementWebAudio"!==t.params.backend||s.default.prototype.supportsWebAudio.call(null)||(t.params.backend="MediaElement"),t.Backend=t.backends[t.params.backend],t.initialisedPluginList={},t.isDestroyed=!1,t.isReady=!1;var t,r=0;return t._onResize=i.debounce(function(){t.drawer.wrapper&&r!=t.drawer.wrapper.clientWidth&&!t.params.scrollParent&&(r=t.drawer.wrapper.clientWidth)&&t.drawer.fireEvent("redraw")},"number"==typeof t.params.responsive?t.params.responsive:100),d(t,p(t))}return t=A,r=[{key:"init",value:function e(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function e(t){var r=this;return t.forEach(function(e){return r.addPlugin(e)}),t.forEach(function(e){e.deferInit||r.initPlugin(e.name)}),this.fireEvent("plugins-registered",t),this}},{key:"getActivePlugins",value:function e(){return this.initialisedPluginList}},{key:"addPlugin",value:function e(t){var r=this;if(!t.name)throw Error("Plugin does not have a name!");if(!t.instance)throw Error("Plugin ".concat(t.name," does not have an instance property!"));t.staticProps&&Object.keys(t.staticProps).forEach(function(e){r[e]=t.staticProps[e]});var n=t.instance;return Object.getOwnPropertyNames(i.Observer.prototype).forEach(function(e){n.prototype[e]=i.Observer.prototype[e]}),this[t.name]=new n(t.params||{},this),this.fireEvent("plugin-added",t.name),this}},{key:"initPlugin",value:function e(t){if(!this[t])throw Error("Plugin ".concat(t," has not been added yet!"));return this.initialisedPluginList[t]&&this.destroyPlugin(t),this[t].init(),this.initialisedPluginList[t]=!0,this.fireEvent("plugin-initialised",t),this}},{key:"destroyPlugin",value:function e(t){if(!this[t])throw Error("Plugin ".concat(t," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[t])throw Error("Plugin ".concat(t," is not active and cannot be destroyed!"));if("function"!=typeof this[t].destroy)throw Error("Plugin ".concat(t," does not have a destroy function!"));return this[t].destroy(),delete this.initialisedPluginList[t],this.fireEvent("plugin-destroyed",t),this}},{key:"destroyAllPlugins",value:function e(){var t=this;Object.keys(this.initialisedPluginList).forEach(function(e){return t.destroyPlugin(e)})}},{key:"createDrawer",value:function e(){var t=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){t.drawBuffer(),t.drawer.progress(t.backend.getPlayedPercents())}),this.drawer.on("click",function(e,r){setTimeout(function(){return t.seekTo(r)},0)}),this.drawer.on("scroll",function(e){t.params.partialRender&&t.drawBuffer(),t.fireEvent("scroll",e)})}},{key:"createBackend",value:function e(){var t=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){t.drawer.progress(t.backend.getPlayedPercents()),t.fireEvent("finish")}),this.backend.on("play",function(){return t.fireEvent("play")}),this.backend.on("pause",function(){return t.fireEvent("pause")}),this.backend.on("audioprocess",function(e){t.drawer.progress(t.backend.getPlayedPercents()),t.fireEvent("audioprocess",e)}),("MediaElement"===this.params.backend||"MediaElementWebAudio"===this.params.backend)&&(this.backend.on("seek",function(){t.drawer.progress(t.backend.getPlayedPercents())}),this.backend.on("volume",function(){var e=t.getVolume();t.fireEvent("volume",e),t.backend.isMuted!==t.isMuted&&(t.isMuted=t.backend.isMuted,t.fireEvent("mute",t.isMuted))}))}},{key:"createPeakCache",value:function e(){this.params.partialRender&&(this.peakCache=new u.default)}},{key:"getDuration",value:function e(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function e(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function e(t){t>=this.getDuration()?this.seekTo(1):this.seekTo(t/this.getDuration())}},{key:"play",value:function e(t,r){var n=this;return this.params.ignoreSilenceMode&&i.ignoreSilenceMode(),this.fireEvent("interaction",function(){return n.play(t,r)}),this.backend.play(t,r)}},{key:"setPlayEnd",value:function e(t){this.backend.setPlayEnd(t)}},{key:"pause",value:function e(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function e(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function e(){return!this.backend.isPaused()}},{key:"skipBackward",value:function e(t){this.skip(-t||-this.params.skipLength)}},{key:"skipForward",value:function e(t){this.skip(t||this.params.skipLength)}},{key:"skip",value:function e(t){var r=this.getDuration()||1,n=this.getCurrentTime()||0;n=Math.max(0,Math.min(r,n+(t||0))),this.seekAndCenter(n/r)}},{key:"seekAndCenter",value:function e(t){this.seekTo(t),this.drawer.recenter(t)}},{key:"seekTo",value:function e(t){var r=this;if("number"!=typeof t||!isFinite(t)||t<0||t>1)throw Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return r.seekTo(t)});var n="WebAudio"===this.params.backend,i=this.backend.isPaused();n&&!i&&this.backend.pause();var a=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(t*this.getDuration()),this.drawer.progress(t),n&&!i&&this.backend.play(),this.params.scrollParent=a,this.fireEvent("seek",t)}},{key:"stop",value:function e(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function e(t){return this.backend.setSinkId(t)}},{key:"setVolume",value:function e(t){this.backend.setVolume(t),this.fireEvent("volume",t)}},{key:"getVolume",value:function e(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function e(t){this.backend.setPlaybackRate(t)}},{key:"getPlaybackRate",value:function e(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function e(){this.setMute(!this.isMuted)}},{key:"setMute",value:function e(t){if(t===this.isMuted){this.fireEvent("mute",this.isMuted);return}this.backend.setMute?(this.backend.setMute(t),this.isMuted=t):t?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function e(){return this.isMuted}},{key:"getFilters",value:function e(){return this.backend.filters||[]}},{key:"toggleScroll",value:function e(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function e(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.params.splitChannelsOptions.channelColors[r]?this.params.splitChannelsOptions.channelColors[r].waveColor=t:this.params.waveColor=t,this.drawBuffer()}},{key:"getProgressColor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function e(t,r){this.params.splitChannelsOptions.channelColors[r]?this.params.splitChannelsOptions.channelColors[r].progressColor=t:this.params.progressColor=t,this.drawBuffer()}},{key:"getBackgroundColor",value:function e(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function e(t){this.params.backgroundColor=t,i.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function e(){return this.params.cursorColor}},{key:"setCursorColor",value:function e(t){this.params.cursorColor=t,this.drawer.updateCursor()}},{key:"getHeight",value:function e(){return this.params.height}},{key:"setHeight",value:function e(t){this.params.height=t,this.drawer.setHeight(t*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function e(t){this.params.splitChannelsOptions.filterChannels=t,this.drawBuffer()}},{key:"drawBuffer",value:function e(){var t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),r=this.drawer.getWidth(),n=t,i=0,a=Math.max(i+r,n);if(this.params.fillParent&&(!this.params.scrollParent||t<r)&&(i=0,a=n=r),this.params.partialRender){var s,o,u=this.peakCache.addRangeToPeakCache(n,i,a);for(o=0;o<u.length;o++)s=this.backend.getPeaks(n,u[o][0],u[o][1]),this.drawer.drawPeaks(s,n,u[o][0],u[o][1])}else s=this.backend.getPeaks(n,i,a),this.drawer.drawPeaks(s,n,i,a);this.fireEvent("redraw",s,n)}},{key:"zoom",value:function e(t){t?(this.params.minPxPerSec=t,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",t)}},{key:"loadArrayBuffer",value:function e(t){var r=this;this.decodeArrayBuffer(t,function(e){r.isDestroyed||r.loadDecodedBuffer(e)})}},{key:"loadDecodedBuffer",value:function e(t){this.backend.load(t),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function e(t){var r=this,n=new FileReader;n.addEventListener("progress",function(e){return r.onProgress(e)}),n.addEventListener("load",function(e){return r.loadArrayBuffer(e.target.result)}),n.addEventListener("error",function(){return r.fireEvent("error","Error reading file")}),n.readAsArrayBuffer(t),this.empty()}},{key:"load",value:function e(t,r,n,i){if(!t)throw Error("url parameter cannot be empty");if(this.empty(),n){var a={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(n),"Peaks are not provided":!r,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof t},s=Object.keys(a).filter(function(e){return a[e]});s.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n	- "+s.join("\n	- ")),n=null)}switch("WebAudio"===this.params.backend&&t instanceof HTMLMediaElement&&(t=t.src),this.params.backend){case"WebAudio":return this.loadBuffer(t,r,i);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(t,r,n,i)}}},{key:"loadBuffer",value:function e(t,r,n){var i=this,a=function e(r){return r&&i.tmpEvents.push(i.once("ready",r)),i.getArrayBuffer(t,function(e){return i.loadArrayBuffer(e)})};if(!r)return a();this.backend.setPeaks(r,n),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",a))}},{key:"loadMediaElement",value:function e(t,r,n,i){var a=this,s=t;if("string"==typeof t)this.backend.load(s,this.mediaContainer,r,n);else{var o=t;this.backend.loadElt(o,r),s=o.src}this.tmpEvents.push(this.backend.once("canplay",function(){a.backend.destroyed||(a.drawBuffer(),a.isReady=!0,a.fireEvent("ready"))}),this.backend.once("error",function(e){return a.fireEvent("error",e)})),r&&(this.backend.setPeaks(r,i),this.drawBuffer(),this.fireEvent("waveform-ready")),(!r||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(s,function(e){a.decodeArrayBuffer(e,function(e){a.backend.buffer=e,a.backend.setPeaks(null),a.drawBuffer(),a.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function e(t,r){var n=this;this.isDestroyed||(this.arraybuffer=t,this.backend.decodeArrayBuffer(t,function(e){n.isDestroyed||n.arraybuffer!=t||(r(e),n.arraybuffer=null)},function(){return n.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function e(t,r){var n=this,a=Object.assign({url:t,responseType:"arraybuffer"},this.params.xhr),s=i.fetchFile(a);return this.currentRequest=s,this.tmpEvents.push(s.on("progress",function(e){n.onProgress(e)}),s.on("success",function(e){r(e),n.currentRequest=null}),s.on("error",function(e){n.fireEvent("error",e),n.currentRequest=null})),s}},{key:"onProgress",value:function e(t){var r;r=t.lengthComputable?t.loaded/t.total:t.loaded/(t.loaded+1e6),this.fireEvent("loading",Math.round(100*r),t.target)}},{key:"exportPCM",value:function e(t,r,n,i,a){t=t||1024,i=i||0,r=r||1e4,n=n||!1;var s=this.backend.getPeaks(t,i,a),o=[].map.call(s,function(e){return Math.round(e*r)/r});return new Promise(function(e,t){if(!n){var r=new Blob([JSON.stringify(o)],{type:"application/json;charset=utf-8"}),i=URL.createObjectURL(r);window.open(i),URL.revokeObjectURL(i)}e(o)})}},{key:"exportImage",value:function e(t,r,n){return t||(t="image/png"),r||(r=1),n||(n="dataURL"),this.drawer.getImage(t,r,n)}},{key:"cancelAjax",value:function e(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(e){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function e(){this.tmpEvents.forEach(function(e){return e.un()})}},{key:"empty",value:function e(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function e(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],n=[{key:"create",value:function e(t){return new A(t).init()}}],r&&m(t.prototype,r),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),A}(i.Observer);t.default=g,y(g,"VERSION","6.4.0"),y(g,"util",i),e.exports=t.default},"./src/webaudio.js"(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function e(t,r){if(!r&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var i=a(r);if(i&&i.has(t))return i.get(t);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var l=o?Object.getOwnPropertyDescriptor(t,u):null;l&&(l.get||l.set)?Object.defineProperty(s,u,l):s[u]=t[u]}return s.default=t,i&&i.set(t,s),s}(r(/*! ./util */ "./src/util/index.js"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function e(n){return n?r:t})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){return t.__proto__=r,t})(e,t)}function u(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f="playing",h="paused",d="finished",p=function(e){!function e(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&o(t,r)}(y,e);var t,r,i,a,p,v=(t=y,r=function e(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function e(){var i,a=l(t);if(r){var s=l(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return function e(t,r){if(r&&("object"===n(r)||"function"==typeof r))return r;if(void 0!==r)throw TypeError("Derived constructors may only return object or undefined");return u(t)}(this,i)});function y(e){var t,r,n;return!function e(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,y),c(u(n=v.call(this)),"audioContext",null),c(u(n),"offlineAudioContext",null),c(u(n),"stateBehaviors",(c(t={},f,{init:function e(){this.addOnAudioProcess()},getPlayedPercents:function e(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function e(){return this.startPosition+this.getPlayedTime()}}),c(t,h,{init:function e(){this.removeOnAudioProcess()},getPlayedPercents:function e(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function e(){return this.startPosition}}),c(t,d,{init:function e(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function e(){return 1},getCurrentTime:function e(){return this.getDuration()}}),t)),n.params=e,n.ac=e.audioContext||(n.supportsWebAudio()?n.getAudioContext():{}),n.lastPlay=n.ac.currentTime,n.startPosition=0,n.scheduledPause=null,n.states=(c(r={},f,Object.create(n.stateBehaviors[f])),c(r,h,Object.create(n.stateBehaviors[h])),c(r,d,Object.create(n.stateBehaviors[d])),r),n.buffer=null,n.filters=[],n.gainNode=null,n.mergedPeaks=null,n.offlineAc=null,n.peaks=null,n.playbackRate=1,n.analyser=null,n.scriptNode=null,n.source=null,n.splitPeaks=[],n.state=null,n.explicitDuration=e.duration,n.sinkStreamDestination=null,n.sinkAudioElement=null,n.destroyed=!1,n}return i=y,a=[{key:"supportsWebAudio",value:function e(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function e(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function e(t){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,t)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function e(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(h),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function e(){this.filters&&(this.filters.forEach(function(e){e&&e.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function e(t){this.state!==this.states[t]&&(this.state=this.states[t],this.state.init.call(this))}},{key:"setFilter",value:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];this.setFilters(r)}},{key:"setFilters",value:function e(t){this.disconnectFilters(),t&&t.length&&(this.filters=t,this.analyser.disconnect(),t.reduce(function(e,t){return e.connect(t),t},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function e(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(y.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(y.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function e(){var t=this;this.scriptNode.onaudioprocess=function(){var e=t.getCurrentTime();e>=t.getDuration()?(t.setState(d),t.fireEvent("pause")):e>=t.scheduledPause?t.pause():t.state===t.states[f]&&t.fireEvent("audioprocess",e)}}},{key:"removeOnAudioProcess",value:function e(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function e(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function e(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function e(t){return t?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId)?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(t)):Promise.reject(Error("setSinkId is not supported in your browser")):Promise.reject(Error("Invalid deviceId: "+t))}},{key:"setVolume",value:function e(t){this.gainNode.gain.setValueAtTime(t,this.ac.currentTime)}},{key:"getVolume",value:function e(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function e(t,r,n){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(t,function(e){return r(e)},n):this.offlineAc.decodeAudioData(t).then(function(e){return r(e)}).catch(function(e){return n(e)})}},{key:"setPeaks",value:function e(t,r){null!=r&&(this.explicitDuration=r),this.peaks=t}},{key:"setLength",value:function e(t){if(!this.mergedPeaks||t!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var r,n=this.buffer?this.buffer.numberOfChannels:1;for(r=0;r<n;r++)this.splitPeaks[r]=[],this.splitPeaks[r][2*(t-1)]=0,this.splitPeaks[r][2*(t-1)+1]=0;this.mergedPeaks[2*(t-1)]=0,this.mergedPeaks[2*(t-1)+1]=0}}},{key:"getPeaks",value:function e(t,r,n){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(r=r||0,n=n||t-1,this.setLength(t),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var i,a=this.createBuffer(1,4096,this.sampleRate);this.buffer=a.buffer}var s=this.buffer.length/t,o=~~(s/10)||1,u=this.buffer.numberOfChannels;for(i=0;i<u;i++){var l=this.splitPeaks[i],c=this.buffer.getChannelData(i),f=void 0;for(f=r;f<=n;f++){var h=~~(f*s),d=~~(h+s),p=c[h],v=p,y=void 0;for(y=h;y<d;y+=o){var m=c[y];m>v&&(v=m),m<p&&(p=m)}l[2*f]=v,l[2*f+1]=p,(0==i||v>this.mergedPeaks[2*f])&&(this.mergedPeaks[2*f]=v),(0==i||p<this.mergedPeaks[2*f+1])&&(this.mergedPeaks[2*f+1]=p)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function e(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function e(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function e(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function e(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function e(t){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=t,this.createSource()}},{key:"createSource",value:function e(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function e(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function e(){return this.state!==this.states[f]}},{key:"getDuration",value:function e(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function e(t,r){if(this.buffer)return this.scheduledPause=null,null==t&&(t=this.getCurrentTime())>=this.getDuration()&&(t=0),null==r&&(r=this.getDuration()),this.startPosition=t,this.lastPlay=this.ac.currentTime,this.state===this.states[d]&&this.setState(h),{start:t,end:r}}},{key:"getPlayedTime",value:function e(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function e(t,r){if(this.buffer){this.createSource();var n=this.seekTo(t,r);t=n.start,r=n.end,this.scheduledPause=r,this.source.start(0,t),this.resumeAudioContext(),this.setState(f),this.fireEvent("play")}}},{key:"pause",value:function e(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch(t){}this.setState(h),this.fireEvent("pause")}},{key:"getCurrentTime",value:function e(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function e(){return this.playbackRate}},{key:"setPlaybackRate",value:function e(t){this.playbackRate=t||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function e(t){this.scheduledPause=t}}],s(i.prototype,a),p&&s(i,p),Object.defineProperty(i,"prototype",{writable:!1}),y}(i.Observer);t.default=p,c(p,"scriptBufferSize",256),e.exports=t.default},"./node_modules/debounce/index.js"(e){function t(e,t,r){function n(){var l=Date.now()-o;l<t&&l>=0?i=setTimeout(n,t-l):(i=null,r||(u=e.apply(s,a),s=a=null))}null==t&&(t=100);var i,a,s,o,u,l=function(){s=this,a=arguments,o=Date.now();var l=r&&!i;return i||(i=setTimeout(n,t)),l&&(u=e.apply(s,a),s=a=null),u};return l.clear=function(){i&&(clearTimeout(i),i=null)},l.flush=function(){i&&(u=e.apply(s,a),s=a=null,clearTimeout(i),i=null)},l}t.debounce=t,e.exports=t}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}return n("./src/wavesurfer.js")})());